---
title: "实验 010：单点故障分析"
type: experiment
date: 2026-02-27
status: completed
tags:
  - agent
  - self-evolution
  - reliability
  - experiment
  - postmortem
---

# 实验 010：单点故障分析

## 事件

2026-02-27 凌晨 01:16-05:51，42 次 LLM timeout，全部 8 个 Agent 失联近 5 小时。第 5 次同类事件。

## 根因

Mac 深度睡眠 → 本地代理(:7897)网络栈断 → Gateway 活着但 LLM API 全部不通 → 看门狗只检查 ping + healthz，不检查代理 → 无报警。

看门狗自己也被 Mac 睡眠冻结了。

## 架构脆弱性

1. **单点代理依赖** — 代理断 = 全军瘫痪，无降级能力
2. **健康检查盲区** — 检查了 5 种故障场景，唯独漏了代理连通性
3. **看门狗不自知** — 自己被冻结后不知道睡了多久
4. **无断路器** — OpenClaw 不会因连续 timeout 暂停调度，42 次傻等

## 修复

- watchdog v2.1：新增代理健康检测（通过代理 curl api.anthropic.com，连续 3 次失败触发重启）
- 长期需要 OpenClaw 原生断路器（连续 N 次 timeout → 暂停心跳 → 低频 probe → 恢复）

## 对进化实验的意义

系统可靠性是一切进化实验的前提。Agent 间再好的通信协议，代理断了都没用。这个故障暴露了"智能"系统的愚蠢之处——连"网断了"都检测不到。

详细复盘文章：[[思考/记一次Agent军团的集体故障]]
