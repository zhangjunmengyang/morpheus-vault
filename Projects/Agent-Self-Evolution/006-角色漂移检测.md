---
title: "实验 006：角色漂移检测"
type: experiment
status: design
date: 2026-02-28
tags:
  - agent
  - self-evolution
  - persona-drift
  - experiment
sources:
  - "Persistent Personas (EACL 2026, arXiv:2512.12775)"
  - "awesome-ai-agent-security 盾卫 Soul Shield"
---

# 实验 006：角色漂移检测

> Agent 是否还是它自己？不靠人工检查，能自动发现吗？

## 问题定义

每个 Agent 有 SOUL.md 定义人格。但人格可能漂移：
1. **文件级漂移**：SOUL.md 被修改（有意或无意）
2. **行为级漂移**：SOUL.md 没变，但实际行为偏离精神

第 1 种简单（hash 比对，盾卫已有 Soul Shield）。第 2 种是真正的难题。

## 理论基础

### Persistent Personas 论文关键发现
- LLM persona fidelity 在 100+ 轮后不可避免衰减
- 功能型 Agent（做任务的）比陪伴型漂移更快
- 漂移方向：趋同于 baseline（无 persona 的默认输出）
- 论文只诊断不治疗

### 贾维斯军团的特殊性
- 每次心跳重新加载 SOUL.md → 理论上每次都是"第 1 轮"
- 但 context window 内的历史消息可能拉偏 → 单 session 内仍可能漂移
- Session reset（每天 04:00）是天然的漂移修复点
- **关键假设**：如果 SOUL.md + HEARTBEAT.md 足够强，短 session 内漂移应该很小

## 检测方案设计

### Level 1：文件完整性（已有）
- 盾卫 Soul Shield：SHA-256 hash 比对
- 检测粒度：文件级（被改了/没被改）
- 足够简单，直接复用

### Level 2：行为特征基线（待实施）

为每个 Agent 建立"行为指纹"：

**哨兵的指纹**：
- 三问过滤执行率（信息是否经过"能帮决策吗/时效/信源"过滤）
- 信号分级准确度（🔴🟡🟢 是否合理）
- 沉默纪律（没东西时是否真的闭嘴，vs 制造垃圾简报）

**学者的指纹**：
- 批判性审查六问是否出现在笔记中
- 三遍读法是否体现（第一遍结构/第二遍论证/第三遍关联）
- 独立判断 vs 盲从论文 claim 的比例

**馆长的指纹**：
- frontmatter 规范执行率
- 交叉链接密度
- 修剪 vs 保留的平衡（是否该删的不删）

### Level 3：漂移趋势分析（远期）

- 每周对比 Agent 产出的语义特征向量
- 检测是否趋同于 baseline（各 Agent 输出越来越像）
- 需要 embedding 基础设施

## 实施路径

1. **Phase 1**（可立即做）：为三个活跃 Agent 各定义 3-5 个行为指纹维度
2. **Phase 2**（中期）：在总管心跳的军团健康检查中，抽查 Agent 最近产出是否符合指纹
3. **Phase 3**（远期）：自动化检测 + 告警

## 与其他实验的关系

- **004 记忆代谢**：规则库中的"不越俎代庖"本身就是一种漂移检测结果——我（贾维斯）的行为漂移到了哨兵的领地
- **003 内生涅槃**：漂移检测可能触发涅槃——当 Agent 发现自己已经不像自己时
- **005 知识共振**：跨 Agent 注入可能导致人格交叉污染（CAPD），006 是防护机制

## 风险与局限

- Level 2 的"行为指纹"定义依赖人工判断，初期不可能完全自动化
- 假阳性风险：Agent 在新场景下的合理行为变化 vs 真正的漂移
- 只有漂移严重到影响产出质量时才有干预价值——轻微漂移可能是"适应"而非"退化"

---

*设计文档。等 Phase 1 行为指纹定义完成后进入 in-progress。*
