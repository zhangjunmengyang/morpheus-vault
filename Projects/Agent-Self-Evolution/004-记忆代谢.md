---
title: "实验 004：记忆代谢"
type: experiment
status: in-progress
date: 2026-02-28
tags:
  - agent
  - self-evolution
  - memory
  - experiment
---

# 实验 004：记忆代谢

> 什么该记、什么该忘？记忆修剪的判断标准本身需要进化。

## 问题定义

贾维斯的记忆系统（MEMORY.md + memory/*.md）面临三个问题：

1. **无淘汰机制**：记忆只增不减，MEMORY.md 已膨胀到 300+ 行
2. **无质量评估**：好规则和坏规则同等待遇，没有验证/置信度机制
3. **无跨 Agent 共享**：贾维斯积累的规则和子 Agent 的规则完全隔离

## 理论基础

基于学者 2/27 完成的 Agent 进化模式谱系分析：

- **贾维斯当前定位**：第②层 Reflexion 级别
- **缺失组件**：Evaluator、规则置信度、跨 Agent 规则共享
- **升级路径**：Reflexion → ExpeL（规则提炼 + 置信度排序 + 检索注入）

## 实验设计

### Phase 1：规则库（2/28 启动 ✅）

在 MEMORY.md 新增「规则库」章节：
- **S/A/B 三级置信度**
- 每条规则标注：出处（哪次经验）+ 验证次数（UPVOTE）+ 反例（DOWNVOTE）
- 初始种子：从已有记忆中提炼 12 条规则

**初始规则库**（2/28）：S 级 5 条、A 级 3 条、B 级 3 条

### Phase 2：Evaluator 机制（待实施）

- 每日结束时（04:00 session reset 前）：自评当日工作质量（1-5 分）+ 理由
- 老板的显式反馈作为外部 Evaluator 信号，触发规则 UPVOTE/DOWNVOTE
- 子 Agent 的产出质量也是 Evaluator 数据源

### Phase 3：记忆代谢引擎（待设计）

- 定期扫描 MEMORY.md，标记"最近 7 天未被引用"的条目
- 规则库的 B 级规则如果 30 天无新验证 → 降级或移除
- S 级规则永不自动移除

### Phase 4：跨 Agent 规则共享（待设计）

- 公告板机制延伸：不只是任务派发，也分享有效工作规则
- 馆长维护全局规则库
- 各 Agent 贡献规则 + 消费规则

## 进展记录

### 2026-02-28 Phase 1 完成

**做了什么**：
- 从 MEMORY.md 已有记忆 + 过去 17 天的经验教训中提炼 11 条规则
- 按 S/A/B 三级置信度排序
- 每条标注出处和验证/反例计数

**关键观察**：
- 提炼规则的过程本身就是 ExpeL 的 "insight extraction"——从多个 episode 中抽象出跨任务适用的原则
- S 级规则几乎都来自"踩坑"——失败是最好的 Evaluator
- B 级规则数据点太少（1 次），需要刻意寻找验证/反驳机会

**下一步**：
- 每次心跳时，如果当前行为匹配/违反某条规则 → 更新验证计数
- 每周复审一次规则库：哪些该升级、哪些该降级
- Phase 2 Evaluator 需要在 HEARTBEAT.md 里加入自评步骤

## 与其他实验的关系

- **001 进化度量**：规则库的增长/修剪速度是"自主决策质量"维度的可观测指标
- **002 横向信息流**：公告板是 Phase 4 跨 Agent 规则共享的基础设施
- **003 内生涅槃**：规则库中的反例积累可能触发认知冲突 → 涅槃的内生触发器

---

*活文档。随实验推进更新。*

### 2026-02-28 Phase 2 启动

**做了什么**：
- HEARTBEAT.md 心跳流程新增第 4 步「自评」：每次心跳检查行为是否匹配/违反规则库中的规则
- 触发机制：在 heartbeat-state.json notes 中标注 `[规则验证: X]` 或 `[规则违反: X]`
- 设计原则：不是每次都强制自评（避免流于形式），只在确实触发时记录

**首次验证**：
- 本次心跳行为（推进 004 Phase 2）对照规则库 → 无违反，S 级「不越俎代庖」匹配（没做哨兵的活）
- 机制验证通过：注入-检查-记录的闭环可运行

**Evaluator 数据源设计**：
1. **自评**（弱信号）：每次心跳的自我对照
2. **老板反馈**（强信号）：老板的显式纠正直接触发规则 UPVOTE/DOWNVOTE（如 2/28 "不越俎代庖"就是老板当面创建的 S 级规则）
3. **子 Agent 产出质量**（间接信号）：如果分配的任务产出差 → 可能是调度规则有问题

**Phase 2 状态**：✅ 已注入心跳流程，首次验证通过。进入持续运行阶段，等待数据积累。
