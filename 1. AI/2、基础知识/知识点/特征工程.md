# 特征工程

# **特征工程**

- 数据健全性检查：空值，无意义值，是否存在不可用数据，都要在dataloader里面处理好，这对于整体影响很大
- 特征规模：最大值-最小值-平均值-四分位数 / 前N和后N的数据也看： 
- 涉及到标准化和归一化与否以及方式的确定 
- 基于欧氏距离的模型：对数据输入尺度非常敏感，所**以需要标准化**
- 基于空间划分树（决策树、梯度提升机、随机森林）的模型对尺度不敏感，**不需要标准化**
- **例外？**
- 特征分布：机器学习模型通常对特征分布都有一些分布假设 
- 比如LR假设数据为高斯分布，那如果数据量上升几个量级可能就不满足了——bin方式
- 特征选择和组合： 
- 交互特征易于制定，但特征的组合导致更多的输入到模型中。为了减少计算开销，通常需要使用自动特征选择来修剪输入特征。
- 方式： 
- Filtering（过滤）
- Wrapper methods（包装方法）
- Embedded methods（嵌入式方法）
- 非线性特征提取和堆叠： 
- 堆叠的关键一点是将非线性引入特征，例如Poly2 FM，甚至聚类，然后以聚类中心作为一个特征
- 特征编码： 
- one-hot encoding
- dummy encoding
- effect encoding
一些方式：

- 二值化
- 分箱：包括连续值分箱和类别特征分箱 
- 等宽分箱：
- 指数分箱：当数字跨越多个数量级时，最好用10个幂（或任何常数的幂）来分组——对数变换要从计数映射到bin，取计数的log值。
- 分位数分箱
- **推荐场景下，用户的统计特征需要先按照用户分组后再做分箱，不建议全局做分箱**
- 类别特征分箱： 
- 基于业务理解
- 基于特征频次合并长尾部分
- 基于决策树模型
- 分布变换： 
- 对数变换：结合指数分箱，用于处理长尾数据，转换后可以近似为高斯分布 
- 举例1：评论数——预测平均商户评级
- R方： 
- 对于非线性：衡量的是预测值对于真值的拟合好坏程度，最大1最好，最小无穷小
- 对于线性：**以最小化R方为目标，寻找y和x之间的最优线性关系**
- Pearson相关系数评估的是变化趋势是否符合直线
- Box-Cox变换 、一般功率变换（目前不了解）：方差稳定的特征变换，不依赖于均值
- 归一化：**Min-max scaling**
- 标准化：Z-score
- 地理位置编码：GeoHash
- 时间属性的：bin-count-cross，concat一起作为一个第一段用户，第二段包各自的连接