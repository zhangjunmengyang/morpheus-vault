---
title: "并行度为什么是 2 的幂次方"
category: "工程"
tags: [Flink, 数据工程]
created: "2026-02-13"
updated: "2026-02-13"
---

# 并行度为什么是 2 的幂次方

主要两方面原因：

### **数据分区和哈希分布效率**

Flink 在进行数据分区（如 `keyBy` 操作）时，通常使用哈希函数来分配数据到不同的并行任务。哈希函数生成的哈希值是一个大整数，如果并行度是 2 的 N 次幂，那么对这些整数进行模运算（%）可以简化为位运算（&），这在计算机底层硬件上非常高效。

例如，假设并行度为 4（即 2^2），那么计算哈希值的分区可以通过以下方式：

```
int partition = hashValue & (parallelism - 1);
```

相比于一般的模运算，位运算的性能更高，因为它直接利用了二进制的特性。

### **资源利用率**

现代计算机系统的硬件资源（如 CPU 核心、内存通道等）通常是基于 2 的幂次进行设计和分配的。将并行度设置为 2 的 N 次幂可以更好地匹配和利用这些硬件资源，减少资源浪费和提高整体系统的效率。
